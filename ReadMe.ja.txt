2019年7月21日

	Hyper Text Mine Sweeper Game Protocol (HTMSGP/1.0)

概要
	この文書はIMSがネットワークでどのように動作するか解説する。

1.動作方法
	IMSはネットワーク上でゲームをする場合サーバーを必要とする。
	サーバーは部屋とクライアントを制御する。

	部屋のホスト(以後ホスト)はサーバーに盤面サイズ・地雷の位置とともに部屋の作成を要求する。
	ホストは部屋にパスワードを設定することもできる。
	サーバーは部屋番号を返す(おっと、これは64ビット整数が必要だ)。

	部屋のゲスト(以後ゲスト)は部屋番号でログインを要求する。
	サーバーは盤面サイズと地雷の位置を返す。

	ゲストが正常にログインできたら、サーバーはクライアントに準備ができたことを通知する。
	ホストは必ず1番である。
	マスを開くコマンドはサーバーによって相手に送られる。しかしサーバーは一切そのコマンドを認識しない。
	接続が切断されたとき、サーバーはそれを相手に通知する。

2.コマンド
	<hoge>は変数である。
	クライアント側:
		ROOM <幅> <高さ> <地雷の位置> ...
			指定されたサイズで部屋を作成し地雷の位置を指定する。
			地雷の位置のは x<<16+y であらわされる
		ROOM <幅> <高さ> PASSWORD <パスワード>
			指定されたサイズで部屋を作成,地雷の位置を指定し部屋にパスワードを設定する。
		LOGIN <部屋番号>
			部屋にログインする。
		LOGIN <部屋番号> PASSWORD <パスワード>
			指定したパスワードで部屋にログインする。
		OPEN <x> <y>
			指定した場所のマスを開く。
		CLOSED
			このコマンドは接続を切断するとき送られる。

	サーバー側:
		SUCCESS
			このコマンドはサーバーへのコマンドが正常に処理されたとき送られる
			必要な場合いくつかの変数が追加される
		READY
			このコマンドはゲストが正常に接続できたとき送られる。
		CLOSED
			このコマンドはクライアントの接続が閉じられたとき送られる。
		JOIN <人数>
			このコマンドはクライアントが新たに接続したときクライアントに対し現在の人数を通知する

3.あとがき
	この文書はジョークだがこのプロトコルは私のリポジトリの"IMS"において実装中である。
	楽しんでね！(^_^)
